#!/bin/sh

DIR=$HOME/notes

sync() {
        rclone --dry-run sync "$@"
          while :; do
                read -p "Sync files? [y/n]: " yn
                case $yn in
                        [Yy]* ) rclone -v sync "$@"; break ;;
                        [Nn]* ) exit ;;
                esac
        done
}

case "$1" in
	"-l")
		(cd $DIR && find . -name '*.txt' | sed -e 's@^\./@@' -e 's@.txt$@@')
		;;
	"--push")
		sync ~/notes remote:notes
		;;
	"--pull")
		sync remote:notes ~/notes
		;;
	*)
		$EDITOR "$DIR/${@}.txt"
		;;
esac
