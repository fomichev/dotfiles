[general]
pythonfile = ~/.offlineimap.py
accounts = kernel
fsync = false

[mbnames]
enabled = yes
filename = ~/.mail/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"

[Account kernel]
localrepository = kernel-local
remoterepository = kernel-remote
autorefresh = 5
quick = 10
presynchook = imapfilter -c ~/.imapfilter.lua

[Repository kernel-local]
type = Maildir
localfolders = ~/.mail/kernel
folderfilter = lambda foldername: foldername in [ 'INBOX', '[Gmail].Drafts', '[Gmail].Spam', '[Gmail].Trash', '[Gmail].Sent Mail', 'platform-driver-x86', 'linux-kernel', 'arch', 'driverdev-devel' ]

[Repository kernel-remote]
type = Gmail
remoteuser = kernel@fomichev.me
remotepass = secret
remotepasseval = getpass("fomichev")
realdelete = no
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
keepalive = 60
holdconnectionopen = yes
